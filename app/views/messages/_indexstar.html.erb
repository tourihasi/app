<!--- ﾒｰｯｾｰｼﾞ一覧 --->
<table class="table table-striped table-bordered table-sm text-center table_common">
  <thead class =  "thead-light text-dark">
    <tr>
      <th>マーク</th>
      <th>No.</th>
      <th><%= sort_link(@search_star_messages, :title, 'タイトル') %></th>
      <th><%= sort_link(@search_star_messages, :user, '投稿者') %></th>
      <th><%= sort_link(@search_star_messages, :created_at, '投稿日') %></th>
      <th>削除</th>
    </tr>
  </thead>

  <% i = 0 %>
  <% @star_messages.each do |message| %>
    <tbody>
      <tr>
        <!--- お気に入り機能 --->
        <td><%= link_to '', message_stars_path(message.id),class: 'btn star_out', method: :delete %></td>
        
        <td><%= i += 1  %></td>
        <% if message.title == "" %>
          <td><%=link_to 'タイトルなし', message_path(message.id)%></td>
        <% else %>
          <td><%=link_to message.title, message_path(message.id)%></td>
        <% end %>
        <!--- userを関連付けているため取得できる  belongs_to :user --->
        <td><%= message.user.name %></td>
        <td><%= message.created_at.strftime('%Y/%m/%d') %></td>
        <!--- ﾛｸﾞｲﾝ中のhostのidとﾒｯｾｰｼﾞのidが一緒なら削除ﾘﾝｸ --->
        <!--- ajax処理追加  remoteとjavascriptで要素取得するために、class delete(任意の名前) --->
        <% if message.user.id == current_user.id %>
          <td><%=link_to '削除', message_path(message.id) ,method: :delete, remote: true, class: 'delete' %></td>
        <%else%>
          <td></td>
        <%end%>
      </tr>
    </tbody>
  <%end%>
</table>

<!--- ﾍﾟｰｼﾞﾈｰｼｮﾝ --->
<div>
  <%= page_entries_info @star_messages %>
  <%= paginate @star_messages %>
</div>